paths:
  /market:
    get:
      summary: Get all market items
      tags:
        - Market
      operationId: getAllMarketItems
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of market items
          content:
            application/json:
              example:
                data:
                  - id: c6f57519-c9f2-4d52-bcf7-f6ef7c7a498f
                    title: Item to sell
                    description: Description of the item
                    price: "50.00"
                    images: []
                    contactEmail: user@example.com
                    contactPhone: "+33612345678"
                    createdAt: "2025-06-18T13:51:42.640Z"
                    updatedAt: "2025-06-18T13:51:42.640Z"
                    author:
                      id: "1"
                      firstname: Johnny
                      lastname: Doe
                      email: user@example.com
                      password: "$2b$10$u71m0c00UZBL5u9gnaaE5umWCatSON2tj.TJVh6Vtdd0SbVYFvYdu"
                      dateOfBirth: "2000-12-09T23:00:00.000Z"
                      profilePicture: ""
                      points: 0
                      role: admin
                      permissions: []
                total: 1
                page: 1
                lastPage: 1

    post:
      summary: Create a new market item with images
      tags:
        - Market
      operationId: createMarketItem
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: './components.yaml#/components/schemas/CreateMarketItemDTO'
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '201':
          description: Market item created successfully
          content:
            application/json:
              example:
                id: c6f57519-c9f2-4d52-bcf7-f6ef7c7a498f
                title: Item to sell
                description: Description of the item
                price: 50
                images: []
                contactEmail: user@example.com
                contactPhone: "+33612345678"
                createdAt: "2025-06-18T13:51:42.640Z"
                updatedAt: "2025-06-18T13:51:42.640Z"
                author:
                  id: "1"
                  firstname: Johnny
                  lastname: Doe
                  email: user@example.com
                  password: "$2b$10$u71m0c00UZBL5u9gnaaE5umWCatSON2tj.TJVh6Vtdd0SbVYFvYdu"
                  dateOfBirth: "2000-12-09T23:00:00.000Z"
                  profilePicture: ""
                  points: 0
                  role: admin
                  permissions: []

  /market/{id}:
    get:
      summary: Get a market item by ID
      tags:
        - Market
      operationId: getMarketItem
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Market item found
          content:
            application/json:
              example:
                id: c6f57519-c9f2-4d52-bcf7-f6ef7c7a498f
                title: Item to sell
                description: Description of the item
                price: "50.00"
                images: []
                contactEmail: user@example.com
                contactPhone: "+33612345678"
                createdAt: "2025-06-18T13:51:42.640Z"
                updatedAt: "2025-06-18T13:51:42.640Z"
                author:
                  id: "1"
                  firstname: Johnny
                  lastname: Doe
                  email: user@example.com
                  password: "$2b$10$u71m0c00UZBL5u9gnaaE5umWCatSON2tj.TJVh6Vtdd0SbVYFvYdu"
                  dateOfBirth: "2000-12-09T23:00:00.000Z"
                  profilePicture: ""
                  points: 0
                  role: admin

    patch:
      summary: Update a market item (can upload additional images)
      tags:
        - Market
      operationId: updateMarketItem
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              allOf:
                - $ref: './components.yaml#/components/schemas/UpdateMarketItemDTO'
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: Market item updated successfully
          content:
            application/json:
              example:
                id: c6f57519-c9f2-4d52-bcf7-f6ef7c7a498f
                title: Updated item to sell
                description: New description of the item
                price: 100
                images: []
                contactEmail: user@example.com
                contactPhone: "+33612345678"
                createdAt: "2025-06-18T13:51:42.640Z"
                updatedAt: "2025-06-18T13:55:01.208Z"
                author:
                  id: "1"
                  firstname: Johnny
                  lastname: Doe
                  email: user@example.com
                  password: "$2b$10$u71m0c00UZBL5u9gnaaE5umWCatSON2tj.TJVh6Vtdd0SbVYFvYdu"
                  dateOfBirth: "2000-12-09T23:00:00.000Z"
                  profilePicture: ""
                  points: 0
                  role: admin
                  permissions: []

    delete:
      summary: Delete a market item
      tags:
        - Market
      operationId: deleteMarketItem
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Market item deleted successfully